---
import { Icon } from 'astro-icon/components';

interface Props {
  /** Texto del bot칩n. Si no se pasa, se renderiza el slot */
  text?: string;
  /** Si se pasa, el componente renderiza un enlace `<a>` en lugar de `<button>` */
  href?: string;
  /** target para el enlace (ej. `_blank`) */
  target?: string;
  /** rel para el enlace; por defecto se aplica `noopener noreferrer` cuando target === '_blank' */
  rel?: string;
  /** Clase base para el bot칩n (layout, paddings, rounded, etc) */
  baseBtnClass?: string;
  /** Clases adicionales que el usuario quiera aplicar (border, bg color, etc) */
  extraBtnClass?: string;
  /** Clase base para el texto */
  baseTextClass?: string;
  iconName?: string;
  /** Clases adicionales para el texto (color, uppercase, size) */
  textClass?: string;
  baseIconClass?: string;
  /** Clases para el icono (s칩lo color/tama침o si lo deseas) */
  iconClass?: string;
  iconCircleClass?: string;
  iconCircle?: string;
}

const {
  text = '',
  baseBtnClass = 'flex justify-center items-center py-[5px] rounded-full cursor-pointer gap-2.5 hover:-translate-y-[2px] transition-transform duration-300 ease-in-out z-[10] pl-5 pr-1.5',
  extraBtnClass = '',
  baseTextClass = 'font-medium leading-[120%] text-[16px] ',
  textClass = 'text-white',
  baseIconClass = 'h-[14px] w-[14px]',
  iconClass = '',
  iconCircle ='flex p-3 rounded-full  justify-center items-center',
  iconCircleClass='bg-white',
  iconName,
  href,
  target,
  rel,
} = Astro.props as Props;

// Construir clases finales
const buttonClasses = `${baseBtnClass} ${extraBtnClass}`.trim();
const paragraphClasses = `${baseTextClass} ${textClass}`.trim();
const iconClasses = `${baseIconClass} ${iconClass}`.trim();
const iconCircleClasses = `${iconCircle} ${iconCircleClass}`.trim();
---

{
  href ? (
    <a
      href={href}
      class={buttonClasses}
      target={target}
      rel={rel ?? (target === '_blank' ? 'noopener noreferrer' : undefined)}
    >
      {text ? <p class={paragraphClasses}>{text}</p> : <slot />}
      <div class={iconCircleClasses}>
        <Icon name={iconName} class={iconClasses} />
      </div>
    </a>
  ) : (
    <button type="button" class={buttonClasses}>
      {text ? <p class={paragraphClasses}>{text}</p> : <slot />}
      <div class={iconCircleClasses}>
        <Icon name={iconName} class={iconClasses} />
      </div>
    </button>
  )
}
