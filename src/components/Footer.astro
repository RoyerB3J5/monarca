---
import { Icon } from 'astro-icon/components';
import { date } from 'astro:schema';

type Translations = typeof import('../i18n/en').default;
type FooterContent = Translations['footer'];
interface Props {
  content?: FooterContent;
}
const { content } = Astro.props as Props;
// Obtener la ruta actual y normalizar el path sin prefijo de idioma
const currentPath = Astro.url.pathname;
// Normalizar: remover idioma y trailing slash
const normalized =
  currentPath.replace(/^\/(en|es)/, '').replace(/\/$/, '') || '/';
// Detectar el idioma actual ('en' o 'es')
const match = currentPath.match(/^\/(en|es)/);
const lang = match ? match[1] : 'en';

// Determinar el color de fondo basado en la ruta
const getBgColor = () => {
  if (normalized === '/') return '#FFB839';
  if (normalized === '/faq') return '#FFF0C4';
  return 'transparent';
};
const bgColor = getBgColor();
const icons = [
  {
    icon: 'facebook',
    href: 'https://www.facebook.com/Grooming.Monarca.spa/',
  },
  {
    icon: 'instagram',
    href: 'https://www.instagram.com/monarca.pets.spa/',
  },
  {
    icon: 'tiktok',
    href: '#',
  },
];
---

<footer class="w-full flex flex-col justify-center items-center z-20">
  <div
    class="w-full relative h-full flex justify-center items-center"
    style={`background-color: ${bgColor};`}
    data-path={currentPath}
    data-normalized={normalized}
    data-bg={bgColor}
  >
    <img
      src="/images/line-footer.svg"
      alt="Fondo del Footer"
      width="1600"
      height="391"
      class="absolute w-full h-full inset-0 object-cover object-[40%_0%] z-0 hidden lg:block"
    />
    <div
      class="h-full w-full max-w-screen md:max-w-7xl flex flex-col md:flex-row justify-between items-end px-5 xl:px-0 text-white z-4 gap-10 lg:gap-8 bg-[#00457F] lg:bg-transparent pb-8 md:pb-6 rounded-t-[42px] lg:rounded-t-none pt-10 lg:pt-0"
    >
      <div
        class="w-full md:w-auto flex flex-col justify-center items-center md:items-start gap-5 md:gap-[25px]"
      >
        <a href="/">
          <img
            src="/images/logo-shapehub.webp"
            alt="Logo de Monarca"
            width="1280"
            height="810"
            class="w-[200px] md:w-[308px] h-auto"
          />
        </a>
        <p
          class="text-[20px] md:text-[24px] tracking-[5.2px] md:tracking-[3.6px] uppercase leading-[120%] md:leading-[120%] font-normal"
          set:html={content?.description}
        />
        <div class="justify-center items-center gap-3 hidden lg:flex">
          {
            icons.map((item) => (
              <div class="w-8 h-8 flex justify-center items-center gap-2.5 rounded-full bg-white hover:bg-secondary cursor-pointer  transition-all duration-200 ease-in-out">
                <Icon
                  name={item.icon}
                  href={item.href}
                  class={'w-4 h-4 text-primary-dark'}
                />
              </div>
            ))
          }
        </div>
      </div>
      <div
        class="w-full md:w-auto flex flex-col md:flex-row justify-center items-start gap-10 md:gap-16 text-white"
      >
        <div class="flex flex-col justify-center items-start gap-3">
          <h4 class="text-[20px] uppercase leading-[120%] font-medium">
            {content?.service.title}
          </h4>
          <div class="flex flex-col justify-center items-start gap-3">
            {
              content?.service.items.map((item) => (
                <a
                  href={`${lang}/service${item.href}`}
                  class="text-[16px] leading-[120%] font-normal hover:font-medium hover:text-secondary transition-all duration-300 ease-in-out"
                >
                  {item.title}
                </a>
              ))
            }
          </div>
        </div>
        <div class="flex flex-col justify-center items-start gap-3">
          <h4 class="text-[20px] uppercase leading-[120%] font-medium">
            {content?.schedules.title}
          </h4>
          <div class="flex flex-col justify-center items-start gap-3">
            {
              content?.schedules.items.map((item) => (
                <p class="text-[16px] leading-[120%] font-normal">{item}</p>
              ))
            }
          </div>
        </div>
        <div class="flex flex-col justify-center items-start gap-3">
          <h4 class="text-[20px] uppercase leading-[120%] font-medium">
            {content?.contact.title}
          </h4>
          <div class="flex flex-col justify-center items-start gap-3">
            {
              content?.contact.items.map((item) => (
                <div class="flex justify-start items-center gap-3">
                  <div class="border border-white h-6 w-6 flex justify-center items-center rounded-full">
                    <Icon name={item.icon} class="w-2.5 h-2.5" />
                  </div>
                  <a
                    href={item.href}
                    class="text-[16px] leading-[120%] font-normal"
                  >
                    {item.text}
                  </a>
                </div>
              ))
            }
          </div>
        </div>
      </div>
      <div class="w-full justify-center items-center gap-3 lg:hidden flex">
        {
          icons.map((item) => (
            <div class="w-[53px] h-[53px] flex justify-center items-center gap-2.5 rounded-full bg-white hover:bg-secondary cursor-pointer  transition-all duration-200 ease-in-out">
              <Icon
                name={item.icon}
                href={item.href}
                class={'w-5 h-5 text-primary-dark'}
              />
            </div>
          ))
        }
      </div>
    </div>
  </div>
  <div
    class="bg-primary-dark w-full flex justify-center items-center relative h-auto"
  >
    <div
      class="h-full w-full max-w-screen md:max-w-7xl flex flex-col md:flex-row gap-2 md:gap-0 justify-between items-center px-5 xl:px-0 py-5 text-white/50"
    >
      <p class="text-[14px] leading-[120%] font-normal">
        Copyright Â© 2025 - Todos los Derechos Reservados
      </p>
      <p class="text-[14px] leading-[120%] font-normal">
        Developed By: Inkshape Group
      </p>
    </div>
  </div>
</footer>
